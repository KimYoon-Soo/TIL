# 인터넷 네트워크
- 물리적으로 가깝지 않은 경우, message는 인터넷 망을 타고 이동<br>
  인터넷 망 내부의 수많은 노드들을 거져서 이동<br>
  그렇다면 어떤 원리로 그 노드들을 거쳐서 이동하는 것일까?

## IP
- 인터넷 프로토콜 (Internet Protocol)

- message가 인터넷에서 이동하기 위한 최소한의 규칙

#### IP 주소
- 지정한 IP 주소(IP Address)에 데이터 전달

- 패킷(Packet)이라는 통신 단위로 데이터 전달

#### IP 패킷 정보
- 패킷 = 패키지(수하물) + 버킷(덩어리)

- 구성 : 출발지 IP, 목적지 IP, 기타 ...

- 클라이언트가 서버로 message를 보내고 서버가 message를 수신하면 수신 여부에 대한 message를 서버가 클라이언트에게 다시 보냄<br>
(다만, 각 message가 이동하는 노드의 경로는 다를 수 있음)

#### IP 프로토콜의 한계
1. 비연결성 : 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송

1. 비신뢰성 : 중간에 패킷이 사라지면? 패킷이 순서대로 안오면?

1. 프로그램 구분 : 같은 IP를 사용하는 서버에서 통신하는 어플리케이션이 둘 이상이면?<br>
(보통 약  1500바이트가 넘어가면 패킷을 끊어서 보냄)<br>
(이걸 TCP가 해결해줌)

## TCP
#### 인터넷 프로토콜 스택의 4계층
어플리케이션 계층 - HTTP, FTP<br><br>
전송 계층 - TCP, UDP<br><br>
인터넷 계층 - IP<br><br>
네트워크 인터페이스 계층 (랜카드, 랜드라이버 등등)

#### TCP/IP 패킷 정보
- 구성 : 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보... + 실제 전송 데이터

- 전송 제어 프로토콜 (Transmission Control Protocol)

#### TCP 특징
1. 연결 지향 - TCP 3 way handshake **(가상 연결)**

1. 데이터 전달 보증

1. 순서 보장

#### TCP 3 way handshake
1. 클라이언트 : SYN (SYN : 접속 요청)

1. 서버 : SYN + ACK (ACK : 요청 수락)

1. 클라이언트 : ACK<br>
   (서로 SYN 1번, ACK 1번을 결국 보내야하고 이렇게 되면 연결이 된 상태)<br>
   (요즘은 최적화가 되어 이 때 데이터 전송 가능)

1. 그 다음에 데이터 전송

#### 데이터 전달 보증
1. 클라이언트 → 서버 : 데이터 전송

1. 서버 → 클라이언트 : 데이터 잘 받았음

#### 순서 보장
1. 클라이언트 → 서버 : 패킷1, 패킷2, 패킷3 순서로 전송

1. 서버 : 패킷1, 패킷3, 패킷2 순서로 도착

1. 서버 → 클라이언트 : 패킷2 부터 다시 보내

## UDP
- IP 계층 바로 위에 TCP와 같은 계층에 있음

- 사용자 데이터그램 프로토콜 (User Datagram Protocol)

- 하얀 도화지에 비유 (기능이 거의 없음)

- 연결 지향 X

- 순서 보장 X

- 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름

- 즉, IP와 거의 같으며 Port와 CheckSum 정도만 추가<br>
  (어플리케이션에서 추가 작업 필요)

- 그럼 이걸 왜 쓸까?<br>
  . TCP는 3 way handshake에서 성능 손실이 있고 TCP 패킷에 데이터를 더 붙이고 이런식이라 데이터도 더 크다. 또한, 이미 구축이 다되어 있어서 최적화 하기가 힘든 구조<br>
  . 내가 더 최적화해서 뭘하고 싶다? → 그러면 TCP는 그대로 사용하고 추가적으로 UDP를 사용해서 최적화<br>
  . 그래서 최근에 각광 받기 시작 (HTTP3에서 UDP 사용)

## PORT
- 단어 뜻음 배가 도착하는 항구의 의미

- 같은 IP 내에서 동작하는 여러 어플리케이션들을 구분하기 위한 것 (1개 PC에서 채팅, 게임, 웹 브라우저 요청 등등 동작)

- IP : 목적지 서버를 찾는 것<br>
  PORT : 서버내에서 돌아가고 있는 대상 어플리케이션을 찾는 것

- 0 ~ 65535 : 할당 가능

- 0 ~ 1023 : 잘 알려진 포트, 사용하지 않는 것이 좋음<br>
  . FTP - 20, 21<br>
  . TELNET - 23<br>
  . HTTP - 80<br>
  . HTTPS - 443 (HTTPS : HTTP에 보안이 추가된 버전)

## DNS
- IP는 변경될 수 있다. (DNS로 해결)

- 도메인 네임 시스템 (Domain Name System)<br>
  . 전화번호부<br>
  . 도메인 명을 IP 주소로 변환

#### DNS 사용
1. 클라이언트 → DNS 서버 : 도메인 명 google.com 전달 (도메인은 사서 DNS 서버에 등록)
1. DNS 서버 → 클라이언트 : 응답 200.200.200.2
1. 클라이언트 → 서버 : 접속 200.200.200.2
